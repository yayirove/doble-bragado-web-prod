---
import BaseLayout from "../layouts/BaseLayout.astro";
import CampeonModal from "../components/CampeonModal.astro";
import PalmaresModal from "../components/PalmaresModal.astro";

const pageTitle = "Historia - La Doble Bragado | 100+ Años de Ciclismo Argentino";
const pageDescription = "Descubre más de 100 años de historia ciclística. La evolución de La Doble Bragado desde 1922 hasta hoy.";
const pageKeywords = "historia ciclismo argentina, doble bragado historia, juan curuchet, cosme saavedra, dario colla";

// JSON-LD
const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "AboutPage",
    name: pageTitle,
    description: pageDescription,
    url: Astro.site ? new URL("/historia", Astro.site).toString() : undefined,
    about: { "@type": "SportsEvent", name: "La Doble Bragado", sport: "Cycling" },
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: [
      { "@type": "ListItem", position: 1, name: "Inicio", item: Astro.site ? new URL("/", Astro.site).toString() : "/" },
      { "@type": "ListItem", position: 2, name: "Historia", item: Astro.site ? new URL("/historia", Astro.site).toString() : "/historia" },
    ],
  },
];

// === Data de Campeones (recorto para mantener tu estructura original) ===
const campeonesData = {
  gret1922: {
    id: "gret-1922",
    foto: "/images/fotos-historicas/Eugenio-Gret.jpg",
    nombre: "Eugenio R. Gret",
    titulo: "El día que todo empezó",
    ficha: {
      nacimiento: "9 de agosto de 1901, Buenos Aires (CABA).",
      residencia: 'Porteño; ligado al Club Ciclista Nación (entonces "Nacional"). Protagonista habitual de crónicas y pruebas en Buenos Aires.',
      inicios: "Registros desde al menos 1919; victorias en el Critérium de Apertura (también llamado Apertura CC La Nación).",
      hito: "Integrante de la Selección Argentina en los Juegos Olímpicos de París 1924 (pista: sprint y 50 km).",
    },
    cronica: [
`La mañana de 1922 huele a ripio húmedo y a tren madrugador...`,
`Al frente, un joven de rostro calmo y pedal firme...`
    ],
  },
  saavedra_1924_1930: {
    id: "saavedra-1924-1930",
    foto: "/images/fotos-historicas/Cosme-Saavedra.jpg",
    nombre: "Cosme Saavedra",
    titulo: "Era Saavedra (1924–1930)",
    ficha: {
      nacimiento: "27 de Septiemnre de 1901, Godoy Cruz, Mendoza.",
      inicios: "Se curtió en clásicas nacionales y rápidamente escaló...",
      hito: "Integró la selección argentina en París 1924 y Ámsterdam 1928.",
    },
    cronica: [
`Verano en Buenos Aires: el aire vibra...`,
`Lo que sigue es una constelación paciente...`
    ],
  },
  curuchet_1997_2003: {
    id: "curuchet-1997-2003",
    foto: "/images/fotos-historicas/Juan-Curuchet.jpg",
    nombre: "Juan Curuchet",
    titulo: "Leyenda Moderna (1997–2003)",
    ficha: {
      nacimiento: "4 de febrero de 1965. Mar del Plata ,Buenos Aires, Argentina.",
      inicios: "Proyección nacional en los años 80 y debut olímpico en 1984...",
      hito: "Campeón olímpico Beijing 2008 (Madison) junto a Walter Pérez...",
    },
    cronica: [
`El Laoshan velódromo tenía luz de mediodía...`,
`Cuando sonó la campana final en Beijing...`
    ],
  },
  colla_2002_2007: {
    id: "colla-2002-2007",
    foto: "/images/fotos-historicas/Dario-Colla-Matador.jpg",
    nombre: "Ángel Darío Colla",
    titulo: "Legado Eterno (2002–2007)",
    ficha: {
      nacimiento: "8 de septiembre de 1973. Buenos Aires.",
      inicios: "Debutó muy joven en JJ.OO....",
      hito: "Doble subcampeón mundial de scratch...",
    },
    cronica: [
`Cae una lluvia fina que pule la calle...`,
`Aquel 2002 fue prólogo de todo...`
    ],
  },
  traico_2025: {
    id: "traico-2025",
    foto: "/images/fotos-historicas/traico-v2.jpg",
    nombre: "Nicolás Traico",
    titulo: "Nueva Era (2025)",
    ficha: {
      nacimiento: "22 de mayo de 1992. Allen, Río Negro, Argentina.",
      inicios: "Formado en el semillero del Alto Valle (Allen)...",
      hito: "Campeón de las 500 Millas del Norte (Artigas, Uruguay) en 2025.",
    },
    cronica: [
`El cielo estaba cargado, pero seco...`,
`La bandera bajó y, unos latidos después...`
    ],
  },
  aguirre_2023: {
    id: "aguirre-2023",
    foto: "/images/fotos-historicas/Maribel-Aguirre-v2.jpg",
    nombre: "Maribel Aguirre",
    titulo: "Revolución Femenina (2023)",
    ficha: {
      nacimiento: "15 de mayo de 1999, San Juan (Argentina).",
      inicios: "Formada en el semillero sanjuanino...",
      hito: "Bronce en ómnium Panamericano de Pista 2019...",
    },
    cronica: [
`La caravana toma aire en Chivilcoy...`,
`Epílogo breve: un año después...`
    ],
  },
};
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  keywords={pageKeywords}
  structuredData={structuredData}
>
  <a href="#contenido" class="sr-only focus:not-sr-only">Saltar al contenido</a>

  <main id="contenido" role="main" tabindex="-1">
<!-- HERO (igual al index) -->
<section id="historia" class="h-screen flex items-center justify-center relative text-center" aria-labelledby="historia-title">
  <img
    src="/images/hero-cristina-greve-v5.jpg"
    alt="Cristina Greve gana la primera etapa de la Doble Bragado Femenina."
    fetchpriority="high"
    decoding="async"
    class="absolute inset-0 w-full h-full object-cover"
  />
  <div class="absolute inset-0 bg-black/50" aria-hidden="true"></div>

  <div class="text-white z-10 max-w-4xl px-6">
    <h1 id="historia-title" class="font-display font-black text-6xl md:text-7xl lg:text-8xl mb-6 leading-tight text-amarillo">
      LEGADO<br />HISTÓRICO
    </h1>
    <p class="text-xl md:text-3xl mb-8 opacity-90 font-semibold max-w-4xl mx-auto">
      Más de 100 años forjando leyendas del ciclismo
    </p>
  </div>
</section>



    <!-- TIMELINE -->
    <section class="bg-oscuro py-20 border-t-0 border-amarillo border-b-0 border-rosa" aria-labelledby="timeline-title">
      <div class="max-w-7xl mx-auto px-8">
        <header class="text-center mb-16">
          <h2 id="timeline-title" class="font-display font-black text-5xl md:text-5xl text-white mb-4 uppercase">
            Historia Viva
          </h2>
          <p class="text-xl text-amarillo font-semibold">
            Los momentos que definieron 100 años de ciclismo
          </p>
        </header>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
          <CampeonModal {...campeonesData.gret1922} />
          <CampeonModal {...campeonesData.saavedra_1924_1930} />
          <CampeonModal {...campeonesData.curuchet_1997_2003} />
          <CampeonModal {...campeonesData.colla_2002_2007} />
          <CampeonModal {...campeonesData.traico_2025} />
          <CampeonModal {...campeonesData.aguirre_2023} />

          <!-- Cards (dejo igual tu contenido) -->
          <article class="bg-grisclaro/10 backdrop-blur-sm rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:border-rosa hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-amarillo rounded-full flex items-center justify-center text-oscuro text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">22</div>
            <h3 class="text-2xl font-bold text-amarillo mb-4 uppercase">El Nacimiento</h3>
            <p class="text-grisclaro leading-relaxed">
              <strong class="text-white">1922:</strong> Primera edición como “Doble Mercedes”.
              <strong class="text-amarillo">Eugenio Gret</strong> se convierte en el primer campeón.
            </p>
            <button data-modal="gret-1922" aria-expanded="false" aria-controls="modal-gret-1922"
              class="mt-6 px-6 py-3 bg-amarillo/20 hover:bg-amarillo/30 border border-amarillo/40 rounded-full text-amarillo font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>

          <!-- (Restantes cards sin cambios) -->
          <article class="bg-grisclaro/10 backdrop-blur-sm rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:border-rosa hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-amarillo rounded-full flex items-center justify-center text-oscuro text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">6</div>
            <h3 class="text-2xl font-bold text-amarillo mb-4 uppercase">Era Saavedra</h3>
            <p class="text-grisclaro leading-relaxed">
              <strong class="text-white">1924–1930:</strong> <strong class="text-amarillo">Cosme Saavedra</strong> domina con 6 títulos.
            </p>
            <button data-modal="saavedra-1924-1930" aria-expanded="false" aria-controls="modal-saavedra-1924-1930"
              class="mt-6 px-6 py-3 bg-amarillo/20 hover:bg-amarillo/30 border border-amarillo/40 rounded-full text-amarillo font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>

          <article class="bg-grisclaro/10 backdrop-blur-sm rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:border-rosa hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-amarillo rounded-full flex items-center justify-center text-oscuro text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">4</div>
            <h3 class="text-2xl font-bold text-amarillo mb-4 uppercase">Leyenda Moderna</h3>
            <p class="text-grisclaro leading-relaxed">
              <strong class="text-white">1997–2003:</strong> <strong class="text-amarillo">Juan Curuchet</strong> gana 4 títulos.
            </p>
            <button data-modal="curuchet-1997-2003" aria-expanded="false" aria-controls="modal-curuchet-1997-2003"
              class="mt-6 px-6 py-3 bg-amarillo/20 hover:bg-amarillo/30 border border-amarillo/40 rounded-full text-amarillo font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>

          <article class="bg-grisclaro/10 backdrop-blur-sm rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:border-rosa hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-amarillo rounded-full flex items-center justify-center text-oscuro text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">∞</div>
            <h3 class="text-2xl font-bold text-amarillo mb-4 uppercase">Legado Eterno</h3>
            <p class="text-grisclaro leading-relaxed">
              <strong class="text-white">Darío Colla:</strong> Bicampeón <strong class="text-amarillo">(2002–2007)</strong>.
            </p>
            <button data-modal="colla-2002-2007" aria-expanded="false" aria-controls="modal-colla-2002-2007"
              class="mt-6 px-6 py-3 bg-amarillo/20 hover:bg-amarillo/30 border border-amarillo/40 rounded-full text-amarillo font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>

          <article class="bg-grisclaro/10 backdrop-blur-sm rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:border-rosa hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-amarillo rounded-full flex items-center justify-center text-oscuro text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">25</div>
            <h3 class="text-2xl font-bold text-amarillo mb-4 uppercase">Nueva Era</h3>
            <p class="text-grisclaro leading-relaxed">
              <strong class="text-white">2025:</strong> <strong class="text-amarillo">Nicolás Traico</strong> inaugura una nueva década.
            </p>
            <button data-modal="traico-2025" aria-expanded="false" aria-controls="modal-traico-2025"
              class="mt-6 px-6 py-3 bg-amarillo/20 hover:bg-amarillo/30 border border-amarillo/40 rounded-full text-amarillo font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>

          <article class="bg-gradient-to-r from-celeste to-rosa rounded-3xl p-8 text-center shadow-xl border-2 border-transparent hover:-translate-y-2 hover:shadow-2xl transition-all duration-300 group">
            <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center text-celeste text-2xl font-black mb-6 mx-auto group-hover:scale-110 transition-transform duration-300">23</div>
            <h3 class="text-2xl font-bold text-white mb-4 uppercase">Revolución Femenina</h3>
            <p class="text-white leading-relaxed">
              <strong class="text-white">2023:</strong> Primera edición femenina. <strong class="text-white">Maribel Aguirre</strong> hace historia.
            </p>
            <button data-modal="aguirre-2023" aria-expanded="false" aria-controls="modal-aguirre-2023"
              class="mt-6 px-6 py-3 bg-white/20 hover:bg-white/30 border border-white/40 rounded-full text-white font-bold text-sm uppercase tracking-wider transition-all duration-300">
              <span class="flex items-center gap-2 justify-center">
                <span>Leer historia completa</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
              </span>
            </button>
          </article>
        </div>
      </div>
    </section>

    <!-- CTA PALMARÉS -->
    <section class="relative bg-gradient-to-r from-amarillo to-rosa py-20" aria-labelledby="campeones-section-title">
      <div class="absolute top-0 left-0 w-full h-0.5 bg-gradient-to-r from-transparent via-rosa to-transparent"></div>
      <div class="max-w-7xl mx-auto px-8 text-center">
        <header class="mb-12">
          <h2 id="campeones-section-title" class="font-display font-black text-5xl md:text-5xl text-oscuro mb-6 uppercase">CAMPEONES</h2>
          <p class="text-xl md:text-2xl text-oscuro/80 font-semibold max-w-4xl mx-auto mb-8">
            104 años de gloria. 88 ediciones masculinas. 75 campeones únicos. Explora el palmarés histórico completo.
          </p>
        </header>

        <div class="flex flex-col sm:flex-row gap-6 justify-center mb-12">
          <button
            data-open-palmares
            class="relative bg-celeste text-white px-12 py-6 rounded-3xl font-bold text-xl md:text-2xl hover:-translate-y-3 hover:shadow-2xl transition-all duration-500 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-white/40 focus:ring-offset-2"
            aria-label="Ver palmarés histórico completo">
            Ver palmarés completo
          </button>
          <noscript>
            <a href="/campeones?timeline=true" class="inline-block bg-celeste text-white px-8 py-4 rounded-2xl font-bold">Ver palmarés (sin JS)</a>
          </noscript>
        </div>
      </div>
    </section>

    <PalmaresModal />
  </main>
</BaseLayout>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Abrir modales de Campeones
    const buttons = document.querySelectorAll("[data-modal]");
    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        const modalId = button.dataset.modal;
        const modal = document.getElementById(`modal-${modalId}`);
        if (modal) {
          modal.classList.remove("hidden");
          document.body.classList.add("modal-open");
          modal.querySelector("[data-close-modal]")?.focus();
        }
      });
    });

    // Cerrar Campeones por X / backdrop / ESC
    document.addEventListener("click", (e) => {
      if (e.target.closest("[data-close-modal]") || e.target.hasAttribute("data-modal-backdrop")) {
        const modal = e.target.closest(".modal-overlay");
        if (modal) {
          modal.classList.add("hidden");
          document.body.classList.remove("modal-open");
        }
      }
    });
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        const openModal = document.querySelector(".modal-overlay:not(.hidden)");
        if (openModal) {
          openModal.classList.add("hidden");
          document.body.classList.remove("modal-open");
        }
      }
    });
  });
</script>
